<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotel Transylvania - Foglalás</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-image: url(hatter.jpg); }
        h1, h2 { color: white; font-size: 80px; background-color: black; }
        .szoba { border: 1px solid gray; margin: 10px 0; padding: 15px; background-color: white; border-radius: 10px; }
        form { background-color: #ddd; padding: 20px; margin-top: 20px; border-radius: 10px; }
        #kep { width: 100%; max-width: 500px; height: auto; border-radius: 5px; }
        .korabbi-foglalasok { background-color: white; padding: 20px; border-radius: 10px; margin-top: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="row">
            <div class="col-lg-8">
                <br><h1><strong>Hotel Transylvania</strong></h1><br>
                
                <section>
                    <h2>Választható szobáink</h2>
                    <div class="szoba">
                        <h3>Standard szoba</h3>
                        <p>Klasszikus berendezés, kényelmes ágyak.</p>
                        <img id="kep" src="unnamed.jpg" alt="Standard szoba">
                        <p>Ár: 15000 Ft / éjszaka</p>
                        <button class="btn btn-dark" data-bs-toggle="modal" data-bs-target="#standardModal">Részletek</button>
                    </div>
                    <div class="szoba">
                        <h3>Luxus lakosztály</h3>
                        <p>Extra nagy méret, saját szauna és erkély.</p>
                        <img id="kep" src="unnamed (1).jpg" alt="Luxus lakosztály">
                        <p>Ár: 25000 Ft / éjszaka</p>
                        <button class="btn btn-dark" data-bs-toggle="modal" data-bs-target="#luxusModal">Részletek</button>
                    </div>
                </section>
    
                <section>
                    <h2>Foglalási űrlap</h2>
                    <form id="foglalasForm">
                        <label>Név:</label><br>
                        <input type="text" id="nev" class="form-control" required><br>
    
                        <label>Email cím:</label><br>
                        <input type="email" id="email" class="form-control" required><br>
    
                        <label>Érkezés:</label><br>
                        <input type="date" id="erk_datum" class="form-control" required><br>
    
                        <label>Távozás:</label><br>
                        <input type="date" id="tav_datum" class="form-control" required><br>
    
                        <label>Szobatípus:</label><br>
                        <select id="szoba_tipus" class="form-select">
                            <option value="15000">Standard szoba (15000 Ft)</option>
                            <option value="25000">Luxus lakosztály (25000 Ft)</option>
                        </select><br>
    
                        <button type="button" class="btn btn-primary" onclick="szamolas()">Kalkuláció és mentés</button>
                    </form>
    
                    <div id="eredmeny" style="margin-top: 20px; color: blue; font-weight: bold;"></div>
                    <p id="visszajelzes" style="display: none; color: green; font-weight: bold;">Köszönjük a foglalást!</p>
                </section>

                <section class="korabbi-foglalasok">
                    <h3>Korábbi foglalásaim</h3>
                    <div id="foglalasLista">Nincs még elmentett foglalás.</div>
                </section>
            </div>

            <div class="col-lg-4">
                <br><br><br><br>
                <div class="card" style="width: 18rem;">
                    <img src="adam-sandler-hotel-transylvania-count-dracula-mavis-dracula.jpg" class="card-img-top" alt="Dracula">
                    <div class="card-body">
                      <a href="index.html" class="btn btn-secondary w-100">Vissza a főoldalra</a>
                      <br>
                      <center><a href="pov.html" class="btn btn-primary">Kattints rám!</a></center>
                      
                    </div>
                </div>
                <br>
                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2732.123456789!2d25.3672!3d45.5151!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zNDXCsDMwJzU0LjQiTiAyNcKwMjInMDEuOSJF!5e0!3m2!1shu!2shu!4v123456789" width="100%" height="350" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
            </div>
        </div>
    </div>

    <div class="modal fade" id="standardModal" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">Standard Szoba</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body">Klasszikus berendezés, vámpírbiztos sötétítő függönyökkel.</div></div></div></div>
    <div class="modal fade" id="luxusModal" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">Luxus Lakosztály</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body">Extra nagy méret, saját szauna és panorámás erkély a temetőre.</div></div></div></div>

    <script>
        window.onload = frissitListat;

        function szamolas() {
            const nev = document.getElementById('nev').value;
            const email = document.getElementById('email').value;
            const beDatum = new Date(document.getElementById('erk_datum').value);
            const kiDatum = new Date(document.getElementById('tav_datum').value);
            const ar = document.getElementById('szoba_tipus').value;
            const szobaNev = document.getElementById('szoba_tipus').options[document.getElementById('szoba_tipus').selectedIndex].text;

            // Validáció
            if (!nev || !email.includes('@')) {
                alert("Kérjük, adjon meg érvényes nevet és email címet!");
                return;
            }

            if (beDatum != "Invalid Date" && kiDatum != "Invalid Date" && kiDatum > beDatum) {
                const diffIdo = kiDatum.getTime() - beDatum.getTime();
                const napok = diffIdo / (1000 * 3600 * 24);
                const osszeg = napok * ar;

                document.getElementById('eredmeny').innerHTML = "Éjszakák száma: " + napok + "<br>Végösszeg: " + osszeg + " Ft";
                document.getElementById('visszajelzes').style.display = "block";

                // LocalStorage mentés
                const ujFoglalas = { nev, szobaNev, napok, osszeg, datum: new Date().toLocaleDateString() };
                let foglalasok = JSON.parse(localStorage.getItem('hotelFoglalasok')) || [];
                foglalasok.push(ujFoglalas);
                localStorage.setItem('hotelFoglalasok', JSON.stringify(foglalasok));
                
                frissitListat();
            } else {
                alert("Hiba! A távozásnak később kell lennie, mint az érkezésnek!");
            }
        }

        function frissitListat() {
            let foglalasok = JSON.parse(localStorage.getItem('hotelFoglalasok')) || [];
            const listaDiv = document.getElementById('foglalasLista');
            if (foglalasok.length === 0) return;

            let html = "<ul class='list-group'>";
            foglalasok.forEach(f => {
                html += `<li class='list-group-item'><strong>${f.datum}</strong>: ${f.nev} - ${f.szobaNev} (${f.napok} éj, ${f.osszeg} Ft)</li>`;
            });
            html += "</ul>";
            listaDiv.innerHTML = html;
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>